{% extends 'base.html.twig' %}

{% block title %}Informations sur l'instrument{% endblock %}

{% block body %}

    <h1>Instrument</h1>

    <table class="table">
        <tbody>

            {% set photo = 'img/instrument/' ~ instrument.id ~'.jpg' %}
            <span class="zoom">
            <img src="{{ asset(photo) }}" title="{{ instrument.typeInstrument.libelle ~ ' ' ~ instrument.Marque.libelle}}" width ="300" />
            </span>
            <tr>
                <th>Numéro de série</th>
                <td>{{ instrument.numSerie }}</td>
            </tr>

            <tr>
                <th>Date d'achat</th>
                <td>{{ instrument.dateAchat ? instrument.dateAchat|date('d/m/Y') : '' }}</td>
            </tr>
            
            <tr>
                <th>Prix</th>
                <td>{{ instrument.prixAchat }}</td>
            </tr>

            <tr>
                <th>Utilisation</th>
                <td>{{ instrument.utilisation }}</td>
            </tr>

            <tr>
                <th>Type</th>
                <td>{{ instrument.typeInstrument.libelle }}</td>
            </tr>
            
            <tr>
                <th>Classe</th>
                <td>{{ instrument.typeInstrument.classInstru.libelle }}</td>
            </tr>

            <tr>
                <th>Couleur</th>
                <td>{{ instrument.Couleur.Nom }}</td>
            </tr>
           
            <tr>
                <th>Marque</th>
                <td>{{ instrument.Marque.libelle }}</td>
            </tr>
            <tr>
                <th>Accessoires</th>
                <td>
                    {% if instrument.accessoires|length > 0 %}
                        <ul>
                            {% for accessoire in instrument.accessoires %}
                                <li>{{ accessoire.libelle }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        Aucun accessoire
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>Interventions</th>
                <td>
                    {% if instrument.interventions|length > 0 %}
                        <ul>
                            {% for intervention in instrument.interventions %}
                            <strong>Intervention :</strong>
                                <li>
                                    {{ intervention.descriptif }}
                                    {% if intervention.dateDebut or intervention.dateFin %}
                                            ({{ intervention.dateDebut|date('d/m/Y') }}{% if intervention.dateFin %} - {{ intervention.dateFin|date('d/m/Y') }}{% endif %})
                                    {% endif %}

                                    {% if intervention.prix %}
                                        (Prix : {{ intervention.prix }} €)
                                    {% endif %}

                                    {% if intervention.quotient %}
                                        (Quotient : {{ intervention.quotient }})
                                    {% endif %}

                                    {% if intervention.professionnel %}
                                        <br>
                                        <em>Professionnel :</em>
                                        {% set p = intervention.professionnel %}
                                        {{ p.prenom|default('') }} {{ p.nom|default('') }}
                                        {% if p.tel or p.mail %}
                                            ({{ p.tel|default('') }}{% if p.mail %} - {{ p.mail }}{% endif %})
                                        {% endif %}
                                    {% endif %} 
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        Aucune intervention
                    {% endif %}
                </td>
            </tr>

            
        </tbody>
    </table>
<button class="btn">
    <a href="{{ path('app_instrument_index') }}">Retour à la liste</a>
</button>
    <br>
<button class="btn">
    <a href="{{ path('app_instrument_edit', {'id': instrument.id}) }}">Modifier</a>
</button>
    {{ include('instrument/_delete_form.html.twig') }}
{% endblock %}
